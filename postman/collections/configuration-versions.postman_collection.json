{
  "info": {"name": "Configuration Versions Collection", "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json", "description": "Configuration Versions endpoints and Archivist upload"},
  "auth": {"type":"bearer","bearer":[{"key":"token","value":"{{API_TOKEN}}","type":"string"}]},
  "item": [
    {"name":"List Config Versions (Workspace)","request":{"method":"GET","description":"List configuration versions for a workspace.","url":{"raw":"https://{{BASE_URL}}/api/v2/workspaces/{{WORKSPACE_ID}}/configuration-versions","host":["{{BASE_URL}}"],"path":["api","v2","workspaces","{{WORKSPACE_ID}}","configuration-versions"]}}},
    {"name":"Show Config Version","request":{"method":"GET","description":"Get details for a configuration version by ID.","url":{"raw":"https://{{BASE_URL}}/api/v2/configuration-versions/{{CONFIG_VERSION_ID}}","host":["{{BASE_URL}}"],"path":["api","v2","configuration-versions","{{CONFIG_VERSION_ID}}"]}}},
    {"name":"Create Config Version (get upload URL)","request":{"method":"POST","description":"Create a configuration version and receive an upload URL.","header":[{"key":"Content-Type","value":"application/vnd.api+json"}],"body":{"mode":"raw","raw":"{\n  \\\"data\\\": {\n    \\\"type\\\": \\\"configuration-versions\\\",\n    \\\"attributes\\\": {\n      \\\"auto-queue-runs\\\": true,\n      \\\"provisional\\\": false,\n      \\\"speculative\\\": false\n    }\n  }\n}\n"},"url":{"raw":"https://{{BASE_URL}}/api/v2/workspaces/{{WORKSPACE_ID}}/configuration-versions","host":["{{BASE_URL}}"],"path":["api","v2","workspaces","{{WORKSPACE_ID}}","configuration-versions"]}}},
    {"name":"Upload Config Tarball to Archivist","request":{"method":"PUT","description":"Upload the configuration tarball to the pre-signed Archivist URL.","header":[{"key":"Content-Type","value":"application/octet-stream"}],"body":{"mode":"file","file":{"src":"configuration.tar.gz"}},"url":{"raw":"{{UPLOAD_URL}}","host":["{{UPLOAD_URL}}"]}}},
    {"name":"Archive Config Version","request":{"method":"POST","description":"Archive a configuration version.","url":{"raw":"https://{{BASE_URL}}/api/v2/configuration-versions/{{CONFIG_VERSION_ID}}/actions/archive","host":["{{BASE_URL}}"],"path":["api","v2","configuration-versions","{{CONFIG_VERSION_ID}}","actions","archive"]}}},
    {"name":"Download Config (by ID)","request":{"method":"GET","description":"Download the configuration files for a version by ID.","url":{"raw":"https://{{BASE_URL}}/api/v2/configuration-versions/{{CONFIG_VERSION_ID}}/download","host":["{{BASE_URL}}"],"path":["api","v2","configuration-versions","{{CONFIG_VERSION_ID}}","download"]}}},
    {"name":"Download Config (by Run)","request":{"method":"GET","description":"Download the configuration files via the run's configuration version.","url":{"raw":"https://{{BASE_URL}}/api/v2/runs/{{RUN_ID}}/configuration-version/download","host":["{{BASE_URL}}"],"path":["api","v2","runs","{{RUN_ID}}","configuration-version","download"]}}},
    {"name":"TFE: Soft Delete Backing Data","request":{"method":"POST","description":"Terraform Enterprise only: Mark backing data for deletion after N days.","header":[{"key":"Content-Type","value":"application/vnd.api+json"}],"body":{"mode":"raw","raw":"{\n  \\\"data\\\": {\n    \\\"attributes\\\": {\n      \\\"delete-older-than-n-days\\\": 23\n    }\n  }\n}\n"},"url":{"raw":"https://{{BASE_URL}}/api/v2/configuration-versions/{{CONFIG_VERSION_ID}}/actions/soft_delete_backing_data","host":["{{BASE_URL}}"],"path":["api","v2","configuration-versions","{{CONFIG_VERSION_ID}}","actions","soft_delete_backing_data"]}}},
    {"name":"TFE: Restore Backing Data","request":{"method":"POST","description":"Terraform Enterprise only: Restore previously soft-deleted backing data.","url":{"raw":"https://{{BASE_URL}}/api/v2/configuration-versions/{{CONFIG_VERSION_ID}}/actions/restore_backing_data","host":["{{BASE_URL}}"],"path":["api","v2","configuration-versions","{{CONFIG_VERSION_ID}}","actions","restore_backing_data"]}}},
    {"name":"TFE: Permanently Delete Backing Data","request":{"method":"POST","description":"Terraform Enterprise only: Permanently delete backing data.","url":{"raw":"https://{{BASE_URL}}/api/v2/configuration-versions/{{CONFIG_VERSION_ID}}/actions/permanently_delete_backing_data","host":["{{BASE_URL}}"],"path":["api","v2","configuration-versions","{{CONFIG_VERSION_ID}}","actions","permanently_delete_backing_data"]}}}
  ]
}
